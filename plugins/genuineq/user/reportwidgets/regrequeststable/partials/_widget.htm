<div class="report-widget">
    <h3><?= e($this->property('title')) ?></h3>

<?php if($userRequests): ?>

    <!--LIST of requests-->
    <div class="layout-row">

        <div class="toolbar-widget list-header" id="Toolbar-listToolbar">

            <div class="control-toolbar">

                <!-- Control Panel -->
                <div class="toolbar-item toolbar-primary">
                    <div data-control="toolbar">
                        <button
                            class="btn btn-primary oc-icon-check-square-o"
                            onclick="$(this).data('request-data', {
                                                checked: $('.control-list').listWidget('getChecked')
                                        })"
                            data-request="onRequest"
                            data-trigger-action="enable"
                            data-trigger=".control-list input[type=checkbox]"
                            data-trigger-condition="checked"
                            data-popup-load-indicator
                            data-request-success="$(this).prop('disabled', true)">
                            <?= e(trans('genuineq.user::lang.reportwidgets.reg_requests_table.frontend.activate_button')) ?>
                        </button>

                        <button
                            class="btn btn-default oc-icon-trash-o"
                            disabled="disabled"
                            onclick="$(this).data('request-data', {
                                                checked: $('.control-list').listWidget('getChecked')
                                        })"
                            data-request="onDelete"
                            data-request-confirm="<?= e(trans('backend::lang.list.delete_selected_confirm')) ?>"
                            data-trigger-action="enable"
                            data-trigger=".control-list input[type=checkbox]"
                            data-trigger-condition="checked"
                            data-request-success="$(this).prop('disabled', true)"
                            data-stripe-load-indicator>
                            <?= e(trans('backend::lang.list.delete_selected')) ?>
                        </button>
                    </div>
                </div>

            </div>
        </div>

        <!--                    Requests list-->
        <div class="list-widget list-scrollable-container scroll-after" id="Lists">

            <div class="control-list list-scrollable" data-control="listwidget">
                <table class="table data" data-control="rowlink">
                    <thead>

                    <tr>
                        <th class="list-checkbox">
                            <div class="checkbox custom-checkbox nolabel">
                                <input type="checkbox" id="list-checkbox"/>
                                <label for="list-checkbox"></label>
                            </div>
                        </th>

                        <th class="list-cell-name-id list-cell-type-number">
                            <a href="#"> id </a>
                        </th>
                        <th class="list-cell-name-name list-cell-type-text">
                            <a href="#"> name </a>
                        </th>
                        <th class="list-cell-name-email list-cell-type-text">
                            <a href="#"> email </a>
                        </th>

                        <th class="list-cell-name-email list-cell-type-text">
                            <a href="#"> created_ip_address </a>
                        </th>

                        <th class="list-cell-name-created_at list-cell-type-datetime">
                            <a href="#"> created_at </a>
                        </th>
                    </tr>

                    </thead>

                    <tbody>

<?php foreach ($userRequests as $userModel): ?>

                    <tr class="rowlink">

                        <td class="list-checkbox nolink">
                            <div class="checkbox custom-checkbox nolabel">
                                <input type="checkbox" name="checked" id="Lists-checkbox-<?= $userModel->id ?>"
                                       value="<?= $userModel->id ?>" autocomplete="off">
                                <label for="Lists-checkbox-<?= $userModel->id ?>"><?= e(trans('backend::lang.list.check')) ?></label>
                            </div>
                        </td>

                        <td class="list-cell-index-1 list-cell-name-id list-cell-type-number">
                            <a onclick="$.popup({ handler: 'onRequestForm', extraData: { record_id: '<?= $userModel->id ?>' } })"
                               href="javascript:;"
                               style="display: none;">
                                <?= $userModel->id ?>
                            </a>

                        </td>

                        <td class="list-cell-index-2 list-cell-name-name list-cell-type-text">
                            <?= $userModel->name ?>
                        </td>

                        <td class="list-cell-index-3 list-cell-name-email list-cell-type-text">
                            <?= $userModel->email ?>
                        </td>

                        <td class="list-cell-index-4 list-cell-name-email list-cell-type-text">
                            <?= $userModel->created_ip_address ?>
                        </td>

                        <td class="list-cell-index-5 list-cell-name-created_at list-cell-type-datetime">
                            <time datetime="<?= $userModel->created_at ?>" data-datetime-control="1"
                                  data-format-alias="dateTimeLongMin"
                                  data-disposable=""><?= $userModel->created_at ?>
                            </time>
                        </td>
                    </tr>

<?php endforeach ?>

                    </tbody>

                </table>

            </div>
        </div>

    </div>

<?php endif ?>

</div>

<script src="\modules\backend\widgets\lists\assets\js\october.list.js"></script>
